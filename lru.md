# LRU内存池
LRU内存池（近期最少使用内存池）是管理内存的一个有效降低磁盘数据频繁读写的办法。它最基本的想法就是认为使用次数最少的元素应该在没空位的时候被淘汰，以给新的元素使用。在实现上，一般采用一个循环双向链表来装元素，再加上一个哈希表来做哈希。在Blastoise中也同样采用这个设计，并以内存页作为元素，当需要用到某张表的数据的时候，就把磁盘的数据读入这个LRU内存池，并在需要的时候淘汰近期最少使用的内存页。
不过在关系型数据库中的LRU还是有一点不一样，那就是执行计划在执行算法的时候，必须要保证内存页没有被换走，不然意外地被换走内存页可能会导致性能出问题，这发生在多线程的数据库中。虽然Blastoise没有使用多线程来实现数据库的执行操作，但还是顾虑了这个问题，因为在单线程的时候，如果内存页被意外换走，则说明生成执行计划的时候算错了内存页的使用情况。而应对这种问题的办法是在LRU内存池的基础上加上一个对内存页的钉操作。所谓的钉操作，意思是标记该内存页正在被使用，不能换走，这种钉操作为了支持多线程一般使用引用计数。如果发现近期最少使用的内存也被钉了，则好近期第二少使用的内存页，以此类推。在Blastoise中，在发现近期最少使用的内存页被钉住的时候，会把该内存页放到链表头部，即让其变成活跃的内存页。
